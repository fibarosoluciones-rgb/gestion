<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fíbaro | Panel</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <main class="auth-layout">
        <section id="role-dashboard" class="card role-dashboard" hidden>
            <header class="dashboard-header">
                <div class="brand compact">
                    <div class="logo" aria-hidden="true">F</div>
                    <div>
                        <p class="brand-name">FÍBARO</p>
                        <p class="brand-tagline">Panel interno</p>
                    </div>
                </div>
                <div class="dashboard-actions">
                    <button id="profile-button" type="button" class="profile-button" aria-haspopup="dialog">
                        <img id="profile-button-image" src="https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?auto=format&fit=crop&w=96&q=80" alt="Ver perfil" loading="lazy">
                    </button>
                    <button id="logout-button" type="button" class="secondary-button">Cerrar sesión</button>
                </div>
            </header>

            <section id="profile-panel" class="profile-panel god-panel" hidden aria-labelledby="profile-panel-title">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <img id="profile-avatar-image" src="https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?auto=format&fit=crop&w=96&q=80" alt="Foto de perfil" loading="lazy">
                    </div>
                    <div class="profile-summary">
                        <h2 id="profile-panel-title">Mis datos personales</h2>
                        <p id="profile-role" class="profile-role"></p>
                        <button id="edit-profile-button" type="button" class="secondary-button">Editar perfil</button>
                    </div>
                </div>

                <div class="avatar-dropzone" id="avatar-dropzone" tabindex="0" role="button" aria-label="Actualizar foto de perfil">
                    <input id="avatar-input" type="file" accept="image/*" hidden>
                    <p class="avatar-dropzone-title">Actualiza tu foto</p>
                    <p class="avatar-dropzone-hint">Arrastra una imagen aquí o selecciónala desde tu galería.</p>
                    <button id="avatar-select-button" type="button" class="ghost-button">Elegir desde la galería</button>
                </div>

                <div class="profile-personal-footer">
                    <dl id="profile-data-view" class="profile-details">
                        <div>
                            <dt>Nombre</dt>
                            <dd id="profile-name">Alexandra Rivera</dd>
                        </div>
                        <div>
                            <dt>Correo</dt>
                            <dd id="profile-email">alexandra.rivera@fibaro.com</dd>
                        </div>
                        <div>
                            <dt>Teléfono</dt>
                            <dd id="profile-phone">+34 600 123 456</dd>
                        </div>
                        <div>
                            <dt>Último acceso</dt>
                            <dd id="profile-last-login"></dd>
                        </div>
                    </dl>

                    <form id="profile-edit-form" class="profile-edit-form" hidden novalidate>
                        <div class="profile-edit-grid">
                            <label class="form-field" for="profile-name-input">
                                <span>Nombre</span>
                                <input id="profile-name-input" name="name" type="text" autocomplete="name" readonly aria-readonly="true">
                            </label>
                            <label class="form-field" for="profile-email-input">
                                <span>Correo</span>
                                <input id="profile-email-input" name="email" type="email" autocomplete="email" required>
                            </label>
                            <label class="form-field" for="profile-phone-input">
                                <span>Teléfono</span>
                                <input id="profile-phone-input" name="phone" type="tel" autocomplete="tel" placeholder="+34 600 123 456">
                            </label>
                        </div>

                        <div class="profile-password-section" aria-describedby="profile-password-feedback">
                            <h3>Seguridad</h3>
                            <p class="section-hint">Actualiza tu contraseña personal cuando lo necesites.</p>
                            <div class="profile-password-grid">
                                <label class="form-field" for="profile-current-password-input">
                                    <span>Contraseña actual</span>
                                    <input id="profile-current-password-input" name="current-password" type="password" autocomplete="current-password">
                                </label>
                                <label class="form-field" for="profile-new-password-input">
                                    <span>Nueva contraseña</span>
                                    <input id="profile-new-password-input" name="new-password" type="password" autocomplete="new-password" minlength="6">
                                </label>
                                <label class="form-field" for="profile-confirm-password-input">
                                    <span>Repite la nueva contraseña</span>
                                    <input id="profile-confirm-password-input" name="confirm-password" type="password" autocomplete="new-password" minlength="6">
                                </label>
                            </div>
                            <p id="profile-password-feedback" class="feedback" role="status" aria-live="polite"></p>
                        </div>

                        <p class="profile-last-login-note">Último acceso: <span id="profile-last-login-static"></span></p>
                        <div class="profile-edit-actions">
                            <button id="cancel-edit-button" type="button" class="ghost-button">Cancelar</button>
                            <button id="save-profile-button" type="submit" class="primary-button">Guardar cambios</button>
                        </div>
                    </form>
                </div>
            </section>

            <section id="god-dashboard" class="god-dashboard" hidden>
                <h1 class="role-title">Modo Dios</h1>
                <p class="role-description">Supervisa todos los departamentos, controla los usuarios y visualiza sus indicadores clave en un solo lugar.</p>

                <div id="god-view-switch" class="god-view-switch" role="tablist" aria-label="Vistas de administración">
                    <button type="button" role="tab" data-view="departments" aria-selected="true">Departamentos</button>
                    <button type="button" role="tab" data-view="users" aria-selected="false">Usuarios</button>
                    <button type="button" role="tab" data-view="profile" aria-selected="false">Mis datos</button>
                </div>

                <section id="god-department-view" class="god-panel" aria-labelledby="department-tabs">
                    <nav id="department-tabs" class="department-tabs" aria-label="Departamentos"></nav>
                    <section id="department-panel" class="department-panel" aria-live="polite"></section>
                </section>

                <section id="user-management-panel" class="god-panel user-management" hidden aria-live="polite">
                    <header class="user-management-header">
                        <div>
                            <h2>Gestión de usuarios</h2>
                            <p>Revisa los perfiles existentes, crea nuevas cuentas y otorga permisos avanzados cuando lo necesites.</p>
                        </div>
                        <button id="toggle-create-user" type="button" class="primary-button">Nuevo usuario</button>
                    </header>

                    <form id="create-user-form" class="user-form" hidden novalidate>
                        <div class="user-form-grid">
                            <label class="form-field" for="user-username-input">
                                <span>Usuario</span>
                                <input id="user-username-input" name="username" type="text" autocomplete="off" required placeholder="ej. jmartinez">
                            </label>
                            <label class="form-field" for="user-name-input">
                                <span>Nombre completo</span>
                                <input id="user-name-input" name="name" type="text" autocomplete="name" required placeholder="Juan Martínez">
                            </label>
                            <label class="form-field" for="user-email-input">
                                <span>Correo electrónico</span>
                                <input id="user-email-input" name="email" type="email" autocomplete="email" placeholder="usuario@fibaro.com">
                            </label>
                            <label class="form-field" for="user-role-select">
                                <span>Rol</span>
                                <select id="user-role-select" name="role" required>
                                    <option value="dios">Modo Dios</option>
                                    <option value="delegado" selected>Delegado</option>
                                    <option value="empleado">Empleado</option>
                                </select>
                            </label>
                            <label class="form-field" for="user-password-input">
                                <span>Contraseña</span>
                                <input id="user-password-input" name="password" type="password" autocomplete="new-password" minlength="4" required>
                            </label>
                        </div>
                        <p id="user-management-feedback" class="feedback" role="status" aria-live="polite"></p>
                        <div class="user-form-actions">
                            <button id="cancel-create-user" type="button" class="ghost-button">Cancelar</button>
                            <button type="submit" class="primary-button">Crear usuario</button>
                        </div>
                    </form>

                    <div id="user-list" class="user-list" role="list"></div>
                </section>
            </section>

            <section id="standard-dashboard" class="standard-dashboard" hidden>
                <h1 id="role-title" class="role-title"></h1>
                <p id="role-description" class="role-description"></p>
                <nav aria-label="Menú principal">
                    <ul id="role-menu" class="role-menu"></ul>
                </nav>
            </section>
        </section>
    </main>

    <script src="script.js"></script>
</body>
</html>
